<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dear Chad</title>
    <style>
      /*
        Simple Valentine's Day page (no libraries).
        - Centered envelope
        - Button opens the flap
        - Card slides out
      */

      :root {
        --bg: #f7d6e6; /* soft pink */
        --envelope: #d62828; /* red */
        --envelope-dark: #b91c1c; /* darker red for depth */
        --card: #fffaf2; /* warm white/cream */
        --text: #2b2b2b;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100svh;
        display: grid;
        place-items: center;
        padding: 28px 14px;
        background: radial-gradient(circle at top, #ffe7f1 0%, var(--bg) 60%, #f3c6dc 100%);
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        color: var(--text);
      }

      .scene {
        width: min(440px, 94vw);
        text-align: center;
        position: relative;
        z-index: 2; /* keep content above floating hearts */
      }

      .music-btn {
        margin-top: 14px;
        border: 0;
        border-radius: 999px;
        padding: 10px 14px;
        font-weight: 650;
        background: rgba(255, 255, 255, 0.92);
        color: #8b0d18;
        cursor: pointer;
        box-shadow: 0 10px 18px rgba(0, 0, 0, 0.12);
      }

      .music-btn[aria-pressed="true"] {
        background: rgba(255, 255, 255, 0.75);
      }

      /* ---- Floating hearts background ---- */
      .hearts {
        position: fixed;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 1;
      }

      .heart {
        position: absolute;
        left: var(--x, 50vw);
        top: 110vh; /* start below the screen */
        font-size: var(--size, 18px);
        opacity: var(--opacity, 0.35);
        color: rgba(214, 40, 40, 0.55);
        text-shadow: 0 10px 24px rgba(0, 0, 0, 0.08);
        transform: translateX(0) translateY(0) rotate(var(--rot, 0deg));
        animation: floatUp var(--dur, 9s) linear forwards;
        will-change: transform, opacity;
        user-select: none;
      }

      @keyframes floatUp {
        0% {
          transform: translateX(0) translateY(0) rotate(var(--rot, 0deg));
          opacity: 0;
        }
        10% {
          opacity: var(--opacity, 0.35);
        }
        100% {
          transform: translateX(var(--drift, 0px)) translateY(-130vh) rotate(calc(var(--rot, 0deg) + 18deg));
          opacity: 0;
        }
      }

      /* ---- Envelope ---- */
      .envelope {
        position: relative;
        width: 100%;
        max-width: 360px;
        height: auto;
        aspect-ratio: 320 / 210;
        margin: 0 auto;
        border-radius: 14px;
        background: linear-gradient(180deg, var(--envelope) 0%, var(--envelope-dark) 100%);
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.18);
        overflow: visible;

        /* gives the flap a nicer 3D feel when it rotates */
        perspective: 900px;
      }

      /* front ‚ÄúX‚Äù details (optional, just to add envelope vibes) */
      .envelope::before,
      .envelope::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 14px;
        pointer-events: none;
        opacity: 0.22;
      }
      .envelope::before {
        background:
          linear-gradient(135deg, transparent 48%, rgba(255, 255, 255, 0.9) 50%, transparent 52%),
          linear-gradient(45deg, transparent 48%, rgba(255, 255, 255, 0.9) 50%, transparent 52%);
      }
      .envelope::after {
        background: radial-gradient(circle at 50% 60%, rgba(255, 255, 255, 0.25), transparent 55%);
      }

      /* The flap is a triangle made with clip-path */
      .flap {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 56%;
        background: #e63946;
        clip-path: polygon(0 0, 100% 0, 50% 100%);
        transform-origin: top center;
        transform: rotateX(0deg);
        transition: transform 700ms cubic-bezier(0.2, 0.9, 0.2, 1);
        z-index: 4; /* closed: flap sits above the card */
        border-top-left-radius: 14px;
        border-top-right-radius: 14px;
      }

      /* A tiny highlight on the flap */
      .flap::after {
        content: "";
        position: absolute;
        inset: 8px 10px auto 10px;
        height: 26px;
        background: rgba(255, 255, 255, 0.18);
        filter: blur(0.5px);
        clip-path: polygon(0 0, 100% 0, 50% 100%);
      }

      /* Pocket/lip to make the card feel like it sits inside */
      .pocket {
        position: absolute;
        left: 12px;
        right: 12px;
        bottom: 12px;
        height: 58%;
        background: rgba(0, 0, 0, 0.07);
        border-radius: 12px;
        z-index: 2;
        overflow: hidden;
      }

      /* ---- Card ---- */
      .card {
        position: absolute;
        left: 18px;
        right: 18px;
        bottom: 18px;
        height: clamp(210px, 48vh, 320px);
        background: var(--card);
        border-radius: 14px;
        box-shadow: 0 14px 24px rgba(0, 0, 0, 0.18);
        padding: 14px 14px 12px;
        text-align: left;
        z-index: 3;

        /* starts mostly hidden inside the envelope */
        --card-hidden: clamp(56px, 14vw, 84px);
        --card-lift: clamp(110px, 28vw, 155px);
        transform: translateY(var(--card-hidden));
        opacity: 0;
        pointer-events: none;
        transition:
          transform 900ms cubic-bezier(0.2, 0.9, 0.2, 1),
          opacity 600ms ease;
      }

      .card h2 {
        margin: 2px 0 8px;
        font-size: 18px;
        letter-spacing: 0.2px;
      }

      .card .body {
        height: calc(100% - 34px); /* header + spacing */
        overflow: auto;
        padding-right: 6px; /* room for scrollbar */
        line-height: 1.35;
        font-size: 14px;
      }

      .card .ps {
        margin-top: 12px;
        font-size: 13px;
        font-style: italic;
        opacity: 0.85;
      }

      /* nicer scrollbar in supporting browsers */
      .card .body::-webkit-scrollbar {
        width: 10px;
      }
      .card .body::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.18);
        border-radius: 999px;
        border: 2px solid rgba(255, 255, 255, 0.7);
      }

      /* ---- Button ---- */
      .open-btn {
        position: absolute;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%);
        z-index: 5;

        border: 0;
        border-radius: 999px;
        padding: 10px 14px;
        font-weight: 650;
        background: rgba(255, 255, 255, 0.92);
        color: #8b0d18;
        cursor: pointer;
        box-shadow: 0 10px 18px rgba(0, 0, 0, 0.18);
        transition: transform 160ms ease, opacity 300ms ease;
      }

      .open-btn:active {
        transform: translateX(-50%) scale(0.98);
      }

      /* ---- Open state ---- */
      .envelope.is-open .flap {
        transform: rotateX(160deg);
        z-index: 1; /* open: flap goes behind the card */
      }

      .envelope.is-open .card {
        z-index: 6;
        transform: translateY(calc(-1 * var(--card-lift)));
        opacity: 1;
        pointer-events: auto; /* allow scrolling/selection once visible */
        transition-delay: 120ms;
      }

      .envelope.is-open .open-btn {
        opacity: 0.35;
        pointer-events: none; /* clicking again does nothing; no need to close */
      }

      /* Small helper text (optional) */
      .hint {
        margin-top: 16px;
        font-size: 13px;
        opacity: 0.75;
      }

      @media (prefers-reduced-motion: reduce) {
        .flap,
        .card,
        .open-btn {
          transition: none !important;
        }
        .hearts {
          display: none;
        }
      }

      @media (max-width: 380px) {
        .envelope {
          border-radius: 12px;
        }
        .card {
          left: 14px;
          right: 14px;
          bottom: 14px;
          padding: 12px;
        }
        .card h2 {
          font-size: 16px;
        }
        .card .body {
          font-size: 13px;
        }
      }
    </style>
  </head>
  <body>
    <div class="hearts" id="hearts" aria-hidden="true"></div>
    <main class="scene" aria-label="Valentine's Day card">
      <!--
        Music note:
        For copyright reasons, this project does NOT include the song file.
        To enable music, put an MP3 named:
          youll-be-in-my-heart-niki.mp3
        in the SAME folder as this index.html file.
      -->
      <audio id="bgMusic" preload="auto" loop>
        <source src="youll-be-in-my-heart-niki.mp3" type="audio/mpeg" />
      </audio>

      <div class="envelope" id="envelope">
        <div class="flap" aria-hidden="true"></div>
        <div class="pocket" aria-hidden="true"></div>

        <article class="card" aria-live="polite">
          <h2>My Pookie Bear,</h2>
          <div class="body">
            <p>
              Even though it‚Äôs only been a month and we‚Äôre not
              officially in a relationship yet, the connection we share feels
              really genuine to me. I deeply appreciate you‚Äîlike the way you
              talk to me, the way you listen, and how genuine your intentions
              are.
            </p>
            <p>
              Being able to talk to you has become one of my favourite parts of
              my days, and lately I‚Äôve noticed myself falling for you more and
              more every day. I appreciate you for making this past month
              something I‚Äôll always cherish, and I‚Äôm really grateful for you.
            </p>
            <p>
              I hope I‚Äôm able to make you feel the same way, because you‚Äôre
              really special to me too, and my intentions towards you are just
              as genuine. I love you, my Pumpkin Boo!
            </p>
            <p class="ps">
              ps: I actually made this myself and coded it myself, but I
              honestly didn‚Äôt know how to deploy it properly, so I asked
              Angelene to help me with that part. Everything else was done with
              love and I really hope you love it.
            </p>
          </div>
        </article>

        <button class="open-btn" id="openBtn" type="button" aria-expanded="false">
          Open me üíå
        </button>
      </div>

      <button class="music-btn" id="musicBtn" type="button" aria-pressed="false">
        Play music ‚ô™
      </button>
    </main>

    <script>
      // Beginner-friendly: a single click opens the envelope.
      // Clicking again keeps it open (we simply ignore extra clicks).
      const envelope = document.getElementById("envelope");
      const openBtn = document.getElementById("openBtn");
      const bgMusic = document.getElementById("bgMusic");
      const musicBtn = document.getElementById("musicBtn");

      openBtn.addEventListener("click", () => {
        if (envelope.classList.contains("is-open")) return;
        envelope.classList.add("is-open");
        openBtn.setAttribute("aria-expanded", "true");

        // Try to start music on open (user gesture required by most browsers).
        playMusic();
      });

      // Floating hearts background (auto-disables for reduced motion).
      const hearts = document.getElementById("hearts");
      const reduceMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      function spawnHeart() {
        if (!hearts) return;

        const el = document.createElement("span");
        el.className = "heart";
        el.textContent = "‚ô•";

        const size = rand(12, 26);
        el.style.setProperty("--size", `${size}px`);
        el.style.setProperty("--x", `${rand(0, 100)}vw`);
        el.style.setProperty("--dur", `${rand(7, 13)}s`);
        el.style.setProperty("--drift", `${rand(-24, 24)}px`);
        el.style.setProperty("--rot", `${rand(-12, 12)}deg`);
        el.style.setProperty("--opacity", String(rand(18, 55) / 100));

        hearts.appendChild(el);

        el.addEventListener(
          "animationend",
          () => {
            el.remove();
          },
          { once: true },
        );

        // Keep the DOM lightweight (mobile friendly)
        const maxHearts = 28;
        while (hearts.children.length > maxHearts) {
          hearts.firstElementChild?.remove();
        }
      }

      function rand(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      if (!reduceMotion) {
        // small burst at start
        for (let i = 0; i < 10; i++) setTimeout(spawnHeart, i * 220);
        // then a steady stream
        setInterval(spawnHeart, 520);
      }

      // --- Music controls ---
      async function playMusic() {
        if (!bgMusic) return;
        try {
          await bgMusic.play();
          if (musicBtn) musicBtn.setAttribute("aria-pressed", "true");
        } catch {
          // Autoplay can fail (missing file or browser policy). User can tap Play.
        }
      }

      function pauseMusic() {
        if (!bgMusic) return;
        bgMusic.pause();
        if (musicBtn) musicBtn.setAttribute("aria-pressed", "false");
      }

      musicBtn?.addEventListener("click", async () => {
        if (!bgMusic) return;
        if (bgMusic.paused) await playMusic();
        else pauseMusic();
      });
    </script>
  </body>
</html>
